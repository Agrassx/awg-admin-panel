# AWG Admin

> –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞–º–∏ AmneziaWG VPN

<p align="center">
  <img src="https://img.shields.io/badge/Kotlin-1.9-7F52FF?logo=kotlin" alt="Kotlin">
  <img src="https://img.shields.io/badge/Ktor-2.3-087CFA?logo=ktor" alt="Ktor">
  <img src="https://img.shields.io/badge/React-18-61DAFB?logo=react" alt="React">
  <img src="https://img.shields.io/badge/MUI-5-007FFF?logo=mui" alt="MUI">
</p>

## üìã –ß—Ç–æ —ç—Ç–æ?

**AWG Admin** ‚Äî —ç—Ç–æ –≤–µ–±-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VPN-–∫–ª–∏–µ–Ω—Ç–∞–º–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º [AmneziaWG](https://amnezia.org/). –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å, —É–¥–∞–ª—è—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–ª–∏–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Å–æ–ª—å—é.

## üéØ –î–ª—è —á–µ–≥–æ?

- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ VPN-–∫–ª–∏–µ–Ω—Ç–∞–º–∏ –±–µ–∑ SSH –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ online/offline —Å—Ç–∞—Ç—É—Å–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ë—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤ —Å QR-–∫–æ–¥–∞–º–∏ –¥–ª—è AmneziaVPN
- –ö–æ–Ω—Ç—Ä–æ–ª—å —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

| –§—É–Ω–∫—Ü–∏—è                     | –û–ø–∏—Å–∞–Ω–∏–µ                                       |
|-----------------------------|------------------------------------------------|
| üë• **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏** | –°–æ–∑–¥–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –≤–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ       |
| üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**           | Online/offline —Å—Ç–∞—Ç—É—Å, –ø–æ—Å–ª–µ–¥–Ω–∏–π handshake     |
| üìà **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**           | –í—Ö–æ–¥—è—â–∏–π/–∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ –ø–æ –∫–ª–∏–µ–Ω—Ç–∞–º          |
| ‚è∞ **–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è**         | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞—Ç—ã –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞           |
| üì± **QR-–∫–æ–¥—ã**              | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥–æ–≤ –¥–ª—è AmneziaVPN              |
| üìã **–≠–∫—Å–ø–æ—Ä—Ç**              | –°–∫–∞—á–∏–≤–∞–Ω–∏–µ .conf —Ñ–∞–π–ª–æ–≤                        |
| üåô **Dark UI**              | –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç—ë–º–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Material Design 3 |

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 ‚îÇ     ‚îÇ                 ‚îÇ     ‚îÇ                 ‚îÇ
‚îÇ  React + MUI    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Ktor Backend   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  AmneziaWG      ‚îÇ
‚îÇ  (Frontend)     ‚îÇ     ‚îÇ  (REST API)     ‚îÇ     ‚îÇ  (awg/wg)       ‚îÇ
‚îÇ                 ‚îÇ     ‚îÇ                 ‚îÇ     ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                 ‚îÇ
                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                        ‚îÇ                 ‚îÇ
                        ‚îÇ  SQLite + ORM   ‚îÇ
                        ‚îÇ  (Exposed)      ‚îÇ
                        ‚îÇ                 ‚îÇ
                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- **Backend:** Kotlin + Ktor (–ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫)
- **Frontend:** Kotlin/JS + React + MUI (Material Design 3)
- **Database:** SQLite + Exposed ORM
- **WireGuard:** –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Shell/Mock)

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Java 17+
- AmneziaWG —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (`awg`, `wg` –≤ PATH)
- –†–∞–±–æ—Ç–∞—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `awg0`)

### Production (Docker)

```bash
cd docker

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
export WG_INTERFACE=awg0
export WG_ENDPOINT=your-server-ip

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose up -d
```

–ü–∞–Ω–µ–ª—å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ `http://localhost:8080`

### Production (–±–µ–∑ Docker)

```bash
# –°–±–æ—Ä–∫–∞
./scripts/build.sh

# –ó–∞–ø—É—Å–∫
export WG_INTERFACE=awg0
export WG_ENDPOINT=$(curl -s ifconfig.me)
java -jar backend/build/libs/backend.jar
```

### Development

```bash
# –ü–æ–ª–Ω—ã–π dev environment —Å Mock WireGuard
./scripts/run-dev-mock.sh

# –ò–ª–∏ —Ä–∞–∑–¥–µ–ª—å–Ω–æ:
# Terminal 1 - Backend
./scripts/run-backend-mock.sh

# Terminal 2 - Frontend (hot reload)
./scripts/run-frontend-dev.sh
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è      | –û–ø–∏—Å–∞–Ω–∏–µ                    | Default               |
|-----------------|-----------------------------|-----------------------|
| `SERVER_PORT`   | –ü–æ—Ä—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞            | `8080`                |
| `WG_INTERFACE`  | –ò–º—è WireGuard –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞    | `awg0`                |
| `WG_ENDPOINT`   | –ü—É–±–ª–∏—á–Ω—ã–π IP/–¥–æ–º–µ–Ω —Å–µ—Ä–≤–µ—Ä–∞  | `localhost`           |
| `DATABASE_PATH` | –ü—É—Ç—å –∫ SQLite –±–∞–∑–µ          | `./data/awg-admin.db` |
| `AWG_BINARY`    | –ü—É—Ç—å –∫ awg binary           | `awg`                 |
| `WG_BINARY`     | –ü—É—Ç—å –∫ wg binary            | `wg`                  |
| `DNS_SERVERS`   | DNS —Å–µ—Ä–≤–µ—Ä—ã –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤    | `1.1.1.1,8.8.8.8`     |
| `USE_MOCK_WG`   | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å mock (–¥–ª—è dev) | `false`               |

## üîå –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∞—Ç—å

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É AmneziaWG

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ AmneziaWG —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
awg show
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–∞–Ω–µ–ª—å —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

```bash
export WG_INTERFACE=awg0  # –∏–º—è –≤–∞—à–µ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
export WG_ENDPOINT=127.0.0.1  # IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
./scripts/run-backend-dev.sh
```

### 2. API Endpoints

| Method   | Endpoint                   | –û–ø–∏—Å–∞–Ω–∏–µ                    |
|----------|----------------------------|-----------------------------|
| `GET`    | `/api/clients`             | –°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º |
| `POST`   | `/api/clients`             | –°–æ–∑–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞             |
| `PATCH`  | `/api/clients/{id}`        | –û–±–Ω–æ–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞            |
| `DELETE` | `/api/clients/{id}`        | –£–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞             |
| `POST`   | `/api/clients/{id}/toggle` | –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å          |
| `GET`    | `/api/clients/{id}/config` | –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥             |
| `GET`    | `/api/server/config`       | –ö–æ–Ω—Ñ–∏–≥ —Å–µ—Ä–≤–µ—Ä–∞              |
| `GET`    | `/api/server/obfuscation`  | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏        |

### 3. –ü—Ä–∏–º–µ—Ä API –∑–∞–ø—Ä–æ—Å–∞

```bash
# –°–æ–∑–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
curl -X POST http://localhost:8080/api/clients \
  -H "Content-Type: application/json" \
  -d '{"name": "Client", "expiresAt": "2025-12-31T00:00:00Z"}'

# –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥
curl http://localhost:8080/api/clients/{id}/config
```

## üîß –ö–∞–∫ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å

### Frontend (React + MUI)

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å hot reload
./scripts/run-frontend-dev.sh

# –û—Ç–∫—Ä—ã—Ç—å http://localhost:3000
# –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
```

**DevTools:**
- React Developer Tools (Chrome/Firefox extension)
- Network tab –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ API –∑–∞–ø—Ä–æ—Å–æ–≤
- Console –¥–ª—è –ª–æ–≥–æ–≤

### Backend (Ktor)

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å mock WireGuard (–±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ VPN)
./scripts/run-backend-mock.sh

# –ò–ª–∏ —Å —Ä–µ–∞–ª—å–Ω—ã–º WG
./scripts/run-backend-dev.sh
```

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –õ–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å
- –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `logback.xml`
- –û—à–∏–±–∫–∏ WireGuard –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ stderr

### –ü–æ–ª–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—ë –≤ tmux
./scripts/run-dev-mock.sh

# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –æ–∫–Ω–∞–º–∏: Ctrl+B, –∑–∞—Ç–µ–º 0 –∏–ª–∏ 1
# –û—Ç—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è: Ctrl+B, –∑–∞—Ç–µ–º D
# –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è: tmux attach -t awg-dev
```

### Mock —Ä–µ–∂–∏–º

–ü—Ä–∏ `USE_MOCK_WG=true`:
- –ö–ª–∏–µ–Ω—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –±–∞–∑–µ, –Ω–æ –Ω–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ WireGuard
- Online/offline —Å—Ç–∞—Ç—É—Å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ
- –¢—Ä–∞—Ñ–∏–∫ —Å–∏–º—É–ª–∏—Ä—É–µ—Ç—Å—è
- –ö–ª—é—á–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Ñ–µ–π–∫–æ–≤—ã–µ

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å UI –±–µ–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ VPN.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
